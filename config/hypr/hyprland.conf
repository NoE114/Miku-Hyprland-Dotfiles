### Miku Hyprland – “The First Sound of the Future”
# Palette is injected from colors.conf (generated by palette-sync.sh). Defaults are themed turquoise + metallic gray.
source = ~/.config/hypr/colors.conf

$mod = SUPER
$terminal = kitty
$launcher = rofi -show drun -theme ~/.config/rofi/miku.rasi

monitor = ,preferred,auto,1

env = XCURSOR_SIZE,24

exec-once = swww init
exec-once = swww img ~/.config/wallpapers/miku-default.jpg --transition-type grow --transition-duration 1.8
exec-once = waybar
exec-once = dunst
exec-once = mpd
exec-once = cava -p ~/.config/cava/config

general {
  gaps_in = 10
  gaps_out = 20
  border_size = 3
  layout = dwindle
  resize_on_border = true
  allow_tearing = false
}

decoration {
  rounding = 14
  blur = true
  blur_size = 8
  blur_passes = 3
  blur_new_optimizations = true
  drop_shadow = true
  shadow_range = 15
  shadow_render_power = 3
  col.shadow = rgba(0c1622aa)
  dim_inactive = false
}

animations {
  enabled = true
  bezier = mikuEase, 0.17, 0.67, 0.43, 1.0
  animation = windows, 1, 5, mikuEase
  animation = fade, 1, 7, default
  animation = workspaces, 1, 6, mikuEase, slidefade
  animation = border, 1, 7, default
}

input {
  kb_layout = us
  follow_mouse = 1
  accel_profile = flat
  sensitivity = 0
  touchpad {
    natural_scroll = true
    tap_to_click = true
    scroll_factor = 0.8
  }
}

gestures {
  workspace_swipe = true
  workspace_swipe_fingers = 3
  workspace_swipe_invert = false
}

device:epic-mouse-v1 {
  sensitivity = -0.3
}

misc {
  disable_hyprland_logo = true
  disable_splash_rendering = true
  focus_on_activate = true
}

windowrulev2 = animation popin, class:^(mpv|vlc)$
windowrulev2 = float, class:^(pavucontrol|blueman-manager)$
windowrulev2 = opacity 0.9, class:^(kitty)$
windowrulev2 = rounding 10, floating:1

# Keybinds
bind = $mod, Return, exec, $terminal
bind = $mod, Q, killactive,
bind = $mod, E, exec, $launcher
bind = $mod, Escape, exec, hyprlock
bind = $mod SHIFT, R, exec, ~/.config/hypr/palette-sync.sh ~/.config/wallpapers/miku-default.jpg
bind = $mod, B, exec, playerctl play-pause
bind = $mod SHIFT, B, exec, playerctl next
bind = $mod, F, togglefloating,
bind = $mod, Space, fullscreen,
bind = $mod, H, movefocus, l
bind = $mod, J, movefocus, d
bind = $mod, K, movefocus, u
bind = $mod, L, movefocus, r
bind = $mod SHIFT, H, movewindow, l
bind = $mod SHIFT, J, movewindow, d
bind = $mod SHIFT, K, movewindow, u
bind = $mod SHIFT, L, movewindow, r
bind = $mod, mouse_down, workspace, e+1
bind = $mod, mouse_up, workspace, e-1

workspace = 1, name:01_Studio
workspace = 2, name:02_Stage
workspace = 3, name:03_Chill
workspace = 4, name:04_Create
workspace = 5, name:05_Negi

# Music-reactive shader hook (optional, noop if not installed)
plugin = hyprexpo {
  columns = 5
  gap = 40
}
